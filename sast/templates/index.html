<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VulnPrism SAST & SCA</title>
  
  <!-- External Libraries -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;600;700;800&display=swap');
    
    :root {
      --cyber-teal: #38bdf8;
      --holographic-purple: #c084fc;
      --cyber-blue: #0ff;
      --matrix-green: #0f0;
      --deep-space: #0a0a15;
    }
    
    body {
      font-family: 'Exo 2', sans-serif;
      background: linear-gradient(135deg, var(--deep-space) 0%, #000814 50%, #001d3d 100%);
      color: #e0e0ff;
      overflow-x: hidden;
      scroll-behavior: smooth;
      margin: 0;
      padding: 0;
    }
    
    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
    
    .shimmer-text {
      background: linear-gradient(90deg, 
        var(--cyber-teal) 20%, 
        var(--holographic-purple) 40%, 
        var(--cyber-teal) 60%);
      background-size: 200% 100%;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: shimmer 3s linear infinite;
    }
    
    @keyframes fogMove {
      0%   { background-position: 0% 0%; }
      100% { background-position: 100% 100%; }
    }
    
    .fog {
      pointer-events: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: url('https://www.transparenttextures.com/patterns/foggy.png');
      opacity: 0.12;
      animation: fogMove 60s linear infinite;
      z-index: -1;
    }
    
    .scan-line {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background: linear-gradient(90deg, transparent, var(--cyber-teal), transparent);
      animation: scan 3s linear infinite;
      z-index: -1;
    }
    
    @keyframes scan {
      0% { top: 0; }
      100% { top: 100%; }
    }

    .cyber-button {
      background: linear-gradient(135deg, var(--cyber-teal), var(--holographic-purple));
      border: none;
      color: white;
      padding: 14px 32px;
      border-radius: 50px;
      font-weight: 700;
      letter-spacing: 1.2px;
      text-transform: uppercase;
      position: relative;
      overflow: hidden;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 8px 25px rgba(56, 189, 248, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1);
      cursor: pointer;
      backdrop-filter: blur(10px);
      text-decoration: none;
      display: inline-block;
    }
    
    .cyber-button:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 12px 35px rgba(56, 189, 248, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.2);
    }
    
    .cyber-button::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -60%;
      width: 20px;
      height: 200%;
      background: rgba(255, 255, 255, 0.3);
      transform: rotate(25deg);
      transition: all 0.5s;
    }
    
    .cyber-button:hover::after {
      left: 120%;
    }

    .container {
      max-width: 1000px;
      margin: 50px auto;
      padding: 40px;
      background: rgba(10, 15, 25, 0.8);
      border-radius: 20px;
      box-shadow: 0 0 40px rgba(0,0,0,0.7), 0 0 0 1px rgba(56, 189, 248, 0.2);
      position: relative;
      z-index: 1;
      text-align: center;
      backdrop-filter: blur(20px);
    }

    h1 {
      font-size: 2.8rem;
      margin-bottom: 30px;
      text-shadow: 0 0 20px rgba(56, 189, 248, 0.5);
    }

    .tool-interface {
      background: rgba(255, 255, 255, 0.03);
      border-radius: 15px;
      padding: 30px;
      margin-bottom: 40px;
      border: 1px solid rgba(56, 189, 248, 0.2);
    }

    .scan-options {
      display: grid;
      grid-template-columns: 1fr;
      gap: 25px;
      margin-bottom: 30px;
    }

    .field {
      text-align: left;
    }

    .field label {
      display: block;
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--cyber-teal);
    }

    input[type="url"],
    textarea,
    input[type="file"] {
      padding: 16px 20px;
      width: calc(100% - 40px);
      border-radius: 12px;
      border: 2px solid rgba(56, 189, 248, 0.3);
      background: rgba(255, 255, 255, 0.05);
      color: #eee;
      font-size: 1rem;
      box-shadow: inset 0 0 15px rgba(56, 189, 248, 0.1);
      transition: all 0.3s ease;
      font-family: 'Exo 2', sans-serif;
    }

    input[type="url"]:focus,
    textarea:focus,
    input[type="file"]:focus {
      outline: none;
      border-color: var(--cyber-teal);
      box-shadow: inset 0 0 15px rgba(56, 189, 248, 0.3), 0 0 20px rgba(56, 189, 248, 0.5);
      transform: translateY(-2px);
    }

    textarea {
      resize: vertical;
      min-height: 120px;
    }

    #progressContainer {
      width: 100%;
      margin: 30px 0;
      display: none;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 0 15px rgba(56, 189, 248, 0.2);
    }

    #progressBar {
      height: 25px;
      background: linear-gradient(90deg, #4caf50, #8bc34a, #cddc39);
      border-radius: 15px;
      width: 0%;
      transition: width 0.3s;
      box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
    }

    #statusText {
      margin-top: 15px;
      font-weight: bold;
      color: #eee;
      font-size: 1.1rem;
    }

    .error {
      color: #f44336;
      background: rgba(244, 67, 54, 0.1);
      padding: 15px;
      border-radius: 10px;
      border: 1px solid #f44336;
    }

    .success {
      color: #4caf50;
      background: rgba(76, 175, 80, 0.1);
      padding: 15px;
      border-radius: 10px;
      border: 1px solid #4caf50;
    }

    .description-section {
      margin-top: 50px;
    }

    .description-card {
      background: rgba(255, 255, 255, 0.03);
      border-radius: 20px;
      padding: 40px;
      border: 1px solid rgba(56, 189, 248, 0.2);
      backdrop-filter: blur(10px);
      text-align: left;
    }

    .description-title {
      font-size: 2.2rem;
      margin-bottom: 25px;
      text-align: center;
    }

    .description-content p {
      font-size: 1.1rem;
      line-height: 1.7;
      margin-bottom: 25px;
      color: #d1d5db;
    }

    .feature-highlights {
      display: grid;
      gap: 25px;
      margin: 30px 0;
    }

    .feature-item {
      display: flex;
      align-items: flex-start;
      gap: 20px;
      padding: 20px;
      background: rgba(56, 189, 248, 0.05);
      border-radius: 12px;
      border: 1px solid rgba(56, 189, 248, 0.2);
    }

    .feature-icon {
      font-size: 2rem;
      flex-shrink: 0;
    }

    .feature-item h4 {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--cyber-teal);
    }

    .feature-item p {
      font-size: 1rem;
      line-height: 1.6;
      margin: 0;
      color: #d1d5db;
    }

    .description-footer {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--holographic-purple);
      text-align: center;
      margin-top: 30px;
    }

    .linkedin-link:hover {
      color: #0077B5;
      text-shadow: 0 0 8px #0077B5;
    }

    /* Enhanced Mobile Responsiveness */
    @media (max-width: 1024px) {
      .container {
        margin: 30px auto;
        padding: 30px;
      }
    }

    @media (max-width: 768px) {
      .container {
        margin: 20px auto;
        padding: 20px;
      }
      h1 {
        font-size: 2.2rem;
      }
      .tool-interface {
        padding: 20px;
      }
      input[type="url"],
      textarea,
      input[type="file"] {
        width: calc(100% - 30px);
        padding: 12px 15px;
      }
      .cyber-button {
        padding: 12px 24px;
        font-size: 0.9rem;
      }
      .description-card {
        padding: 25px;
      }
      .feature-item {
        flex-direction: column;
        text-align: center;
        gap: 15px;
      }
      #progressContainer {
        padding: 15px;
      }
      .description-title {
        font-size: 1.8rem;
      }
    }

    @media (max-width: 480px) {
      .container {
        margin: 10px auto;
        padding: 15px;
        border-radius: 15px;
      }
      h1 {
        font-size: 1.8rem;
      }
      .tool-interface {
        padding: 15px;
      }
      .cyber-button {
        width: 100%;
        padding: 14px 0;
      }
      .description-title {
        font-size: 1.6rem;
      }
      .feature-item {
        padding: 15px;
      }
      .feature-item h4 {
        font-size: 1.1rem;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <div class="fog"></div>
  <div class="scan-line"></div>

  <div class="container">
    <h1 class="shimmer-text">VulnPrism SAST & SCA</h1>
    
    <!-- Main Tool Interface -->
    <div class="tool-interface">
      <form id="scanForm">
        <div class="scan-options">
          <div class="field">
            <label><strong>üìÇ Git Repository URL:</strong></label>
            <input type="url" name="repo_url" placeholder="https://github.com/you/repo.git" />
          </div>

          <div class="field">
            <label><strong>üìù Paste Code:</strong></label>
            <textarea name="code_text" rows="6" placeholder="Paste your code here for instant analysis..."></textarea>
          </div>

          <div class="field">
            <label><strong>üìÅ Upload File/Archive:</strong></label>
            <input type="file" name="file" accept=".zip,.tar.gz,.tgz,.tar,.*" />
          </div>
        </div>

        <div class="field" style="text-align: center;">
          <button type="submit" class="cyber-button">
            <span style="display: flex; align-items: center; gap: 8px; justify-content: center;">
              üîç Scan Now
              <svg style="width: 16px; height: 16px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
              </svg>
            </span>
          </button>
        </div>
      </form>

      <div id="progressContainer">
        <div id="progressBar"></div>
        <div id="statusText">Initializing scan...</div>
      </div>
    </div>

    <!-- Description Section (moved below tool) -->
    <div class="description-section">
      <div class="description-card">
        <h2 class="description-title shimmer-text">üõ°Ô∏è Build Security From the Start</h2>
        <div class="description-content">
          <p><strong>VulnPrism SAST & SCA</strong> is your comprehensive static analysis security platform that examines your code before it ever runs. Our advanced engine combines Static Application Security Testing (SAST) with Software Composition Analysis (SCA) to identify vulnerabilities, security misconfigurations, and risky dependencies at the source code level.</p>
          
          <div class="feature-highlights">
            <div class="feature-item">
              <span class="feature-icon">üîç</span>
              <div>
                <h4>Deep Source Code Analysis</h4>
                <p>Advanced pattern recognition and data flow analysis identifies complex vulnerabilities like SQL injection, XSS, and authentication bypasses across multiple programming languages.</p>
              </div>
            </div>
            <div class="feature-item">
              <span class="feature-icon">üì¶</span>
              <div>
                <h4>Software Composition Analysis</h4>
                <p>Comprehensive scanning of third-party libraries and dependencies against extensive vulnerability databases, including license compliance and outdated component detection.</p>
              </div>
            </div>
            <div class="feature-item">
              <span class="feature-icon">‚ö°</span>
              <div>
                <h4>Shift-Left Security Integration</h4>
                <p>Seamlessly integrates into your development workflow with IDE plugins, CI/CD pipeline integration, and real-time feedback to catch issues before they reach production.</p>
              </div>
            </div>
          </div>
          
          <p class="description-footer">Secure your entire software supply chain with enterprise-grade static analysis that scales with your development velocity.</p>
        </div>
      </div>
    </div>
  </div>

  <footer style="text-align: center; padding: 20px; margin-top: 50px; color: #aaa;">
    <p style="font-size: 0.9rem;">
      Designed & developed by Khan Mohammed ¬© 2025 All rights reserved |
      <a href="https://www.linkedin.com/in/khan-mohammed-790b18214" target="_blank" rel="noopener noreferrer" class="linkedin-link" style="color: #eee; text-decoration: none;">
        www.linkedin.com/in/khan-mohammed-790b18214
      </a>
    </p>
  </footer>

  <script type="text/babel">
    const CYBER_PALETTE = {
      black: '#000000',
      cyberTeal: '#38bdf8',
      holographicPurple: '#c084fc',
      matrixGreen: '#0f0',
      deepSpace: '#0a0a15'
    };

    const user = { id: 'user123', fingerprint: 'unique-biometric-token' };

    function DNABackground({ user }) {
      const dnaHash = CryptoJS.SHA256(user.fingerprint + user.id).toString();
      const seed = parseInt(dnaHash.slice(0, 8), 16);

      React.useEffect(() => {
        const canvas = document.getElementById('dna-canvas');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({
          canvas,
          alpha: true,
          antialias: true
        });

        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.setClearColor(0x000000, 0);

        const particlesGeometry = new THREE.BufferGeometry();
        const particlesCount = 2000;
        const posArray = new Float32Array(particlesCount * 3);

        for(let i = 0; i < particlesCount * 3; i++) {
          posArray[i] = (Math.random() - 0.5) * 100;
        }

        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const particlesMaterial = new THREE.PointsMaterial({
          size: 0.1,
          color: CYBER_PALETTE.cyberTeal,
          transparent: true,
          opacity: 0.6
        });

        const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particlesMesh);

        const vertexShader = `
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
        `;

        const fragmentShader = `
          uniform float time;
          uniform vec3 color1;
          uniform vec3 color2;
          varying vec2 vUv;
          void main() {
            float t = (sin(time + vUv.x*10.0 + vUv.y*10.0) +
                       sin(time*1.5 + vUv.x*5.0 - vUv.y*5.0)) * 0.25 + 0.5;
            vec3 color = mix(color1, color2, t);
            float pulse = sin(time*2.0)*0.1 + 0.6;
            gl_FragColor = vec4(color, pulse * 0.4);
          }
        `;

        const material = new THREE.ShaderMaterial({
          uniforms: {
            time:   { value: 0 },
            color1: { value: new THREE.Color(CYBER_PALETTE.cyberTeal) },
            color2: { value: new THREE.Color(CYBER_PALETTE.holographicPurple) }
          },
          vertexShader,
          fragmentShader,
          wireframe: true,
          transparent: true
        });

        function makeTorus(x, ry=0) {
          const geo = new THREE.TorusGeometry(12, 2, 64, 200);
          const mesh = new THREE.Mesh(geo, material);
          mesh.position.x = x;
          mesh.rotation.y = ry;
          scene.add(mesh);
          return mesh;
        }

        const torus1 = makeTorus(-5, 0);
        const torus2 = makeTorus(5, Math.PI/2);

        camera.position.z = 30;
        let idx = 0;
        const interval = setInterval(() => {
          idx = (idx + 1) % 3;
          const tgt = [-5, 0, 5];
          gsap.to(torus1.position, { z: tgt[idx], duration: 1, ease: "power2.inOut" });
          gsap.to(torus2.position, { z: tgt[(idx+2)%3], duration: 1, ease: "power2.inOut" });
        }, 5000);

        function animate() {
          requestAnimationFrame(animate);
          torus1.rotation.x += 0.004;
          torus1.rotation.y += 0.004;
          torus2.rotation.x += 0.004;
          torus2.rotation.y += 0.004;
          particlesMesh.rotation.y += 0.001;
          material.uniforms.time.value += 0.04;
          renderer.render(scene, camera);
        }
        animate();

        const handleResize = () => {
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(window.innerWidth, window.innerHeight);
        };

        window.addEventListener('resize', handleResize);

        return () => {
          clearInterval(interval);
          renderer.dispose();
          window.removeEventListener('resize', handleResize);
        };
      }, [seed]);

      return <canvas id="dna-canvas" className="fixed inset-0 z-0 opacity-25" />;
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<DNABackground user={user} />);

    const form = document.getElementById('scanForm');
    const progressContainer = document.getElementById('progressContainer');
    const progressBar = document.getElementById('progressBar');
    const statusText = document.getElementById('statusText');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Show progress UI
      progressContainer.style.display = 'block';
      progressBar.style.width = '10%';
      statusText.textContent = 'Preparing scan...';
      statusText.className = '';

      const formData = new FormData(form);

      try {
        const response = await fetch('/scan', {
          method: 'POST',
          body: formData
        });

        if (!response.ok) {
          const error = await response.text();
          throw new Error(error || 'Scan failed');
        }

        // Update progress
        progressBar.style.width = '70%';
        statusText.textContent = 'Generating report...';

        // Get filename from headers
        const contentDisposition = response.headers.get('Content-Disposition');
        const filename = contentDisposition
          ? contentDisposition.split('filename=')[1].replace(/"/g, '')
          : `VulnPrism_Report_${Date.now()}.pdf`;

        // Create download
        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();

        // Cleanup
        window.URL.revokeObjectURL(url);
        document.body.removeChild(a);

        // Final UI update
        progressBar.style.width = '100%';
        statusText.textContent = 'Scan complete! Report downloaded.';
        statusText.className = 'success';

        // Reset after delay
        setTimeout(() => {
          progressContainer.style.display = 'none';
          form.reset();
        }, 3000);

      } catch (error) {
        console.error('Scan error:', error);
        progressBar.style.background = '#f44336';
        statusText.textContent = `Error: ${error.message}`;
        statusText.className = 'error';
      }
    });
  </script>
